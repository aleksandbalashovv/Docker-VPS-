# Docker-VPS-(Step1)

# Docker-based Service Environment (Learning Project)

## Общее описание
Репозиторий фиксирует последовательную работу по разбору и подготовке изолированной среды для серверного Java-приложения с использованием Docker.
Проект использовался как практический стенд для:
понимания границ между локальной системой, контейнером и удалённым сервером
формирования корректного подхода к работе с инфраструктурой
отработки диагностики и принятия решений на уровне окружения
В качестве целевого приложения рассматривался Minecraft-сервер, однако основной фокус был направлен не на сам сервис, а на среду его исполнения.

# Цель работы
## Разобраться в ответственности и границах компонентов:
локальный хост
Docker-контейнер
удалённый сервер (VPS)
Подготовить воспроизводимую среду исполнения для Java-приложения
Избежать ручной конфигурации контейнеров
Научиться выявлять и устранять инфраструктурные проблемы на основании фактического состояния системы
Зафиксировать последовательность решений и точек остановки

# Исходные условия 
Локальная среда: macOS
Контейнеризация: Docker Desktop
Удалённый сервер (VPS): присутствует, но намеренно не используется на данном этапе
Приложение: Java-based сервер (Minecraft)

# Подход к работе
В ходе работы применялся следующий подход:
Среды не смешивались. Все эксперименты выполнялись локально.
Любое действие выполнялось только после понимания его эффекта.
При возникновении проблем сначала анализировалось текущее состояние системы, затем принималось решение.
Приоритет отдавался декларативному описанию среды через Dockerfile.
Ручные изменения внутри контейнеров рассматривались как временные и неприемлемые для финального решения.

## Выполненные шаги
Проверка локальной Docker-среды
Подтверждена работоспособность Docker Desktop и корректность CLI-доступа.

## Разделение host и container
Запуск тестового контейнера показал, что:
контейнер не имеет доступа к Docker CLI
контейнер не управляет жизненным циклом других контейнеров
Это позволило зафиксировать контейнер как изолированный процесс, а не отдельную систему.

# Создание проекта
Проект и все конфигурационные файлы создавались на уровне хоста, а не внутри контейнера.
Структура:
minecraft-docker/
└── Dockerfile

## Подготовка среды исполнения
Для среды исполнения выбран готовый Java runtime.
Dockerfile:
FROM eclipse-temurin:17-jre

WORKDIR /app

CMD ["bash"]
Решения:
использование специализированного базового образа
отказ от установки пакетов через apt
минимизация размера и сложности образа
обеспечение воспроизводимости

# Сборка и проверка образа
Образ был собран и проверен запуском Java внутри контейнера.
Результат:
Java доступна в PATH
версия соответствует требованиям
среда готова к запуску сервисов

# Инцидент: рост потребления дискового пространства
Симптомы
На локальной машине было обнаружено значительное потребление диска Docker-средой.

Диагностика
Использованы команды:
docker system df
docker ps
Выявлен активный контейнер, не относящийся к текущему проекту, потребляющий значительный объём дискового пространства.
## Решение
Контейнер был остановлен и удалён. Среда приведена в предсказуемое состояние.
## Вывод
Активные контейнеры могут потреблять значительные ресурсы
Состояние Docker-среды требует регулярной проверки
Диагностика должна предшествовать любым действиям по очистке

## Текущее состояние
Локальная Docker-среда приведена в контролируемое состояние
Подготовлен корректный Java runtime
Dockerfile минимален и воспроизводим
Проект готов к следующему этапу

# Запланированные шаги
формирование структуры сервиса внутри контейнера
добавление server.jar
запуск сервиса в контейнере
перенос аналогичного подхода на VPS
настройка логирования и мониторинга

# Как проверить 
docker --version 
Ожидания: 
minecraft-docker/Dockerfile
Проверка: 
ls
cat Dockerfile
Ожидаевый результат:
FROM eclipse-temurin:21-jre
WORKDIR /app
CMD ["bash"]

## Сборка docker образа 
Сборка образа выполняется из корня проекта
docker build -t java-test
Ожидаемый рузультат: 
Сборка завершается без ошибок
Образ java-test появляется в списке образов 
Проверка 
docker images java-test

# Проверка Java runtime внутри контейнера 
Запуск контейнера и проверка версии Java: 
docker run --rm java-test java -version
Ожидаемый результат 
Java запускается корректно 
Версия соответсвует 21 

# Проверка состояния Docker среды 
Для контроля ресурсов и состояния Docker 
docker system df
docker ps 
Назначение:
Убидиться что нет лишних активных контейнеров 
проверить потребление дискового пространства 
Зафиксировать текущее состояние среды перед дальнейшими шагами 

# Очистка среды( при необходимости )
docker stop <container_id>
docker rm <container_id> 
Или очистка неиспользуемых ресурсов:
docker system prune

Данный блок используется для:
Подтверждение корректности окружения 
Воспроизводимость текущего состояния 
Безопасного продолжение следующих этавоп проекта

# Итог
В рамках данного этапа была выполнена не настройка сервиса, а системная работа с окружением:
зафиксированы границы ответственности компонентов
сформирован аккуратный подход к инфраструктуре
получена воспроизводимая среда исполнения
Документ служит точкой фиксации текущего состояния и основанием для дальнейшего развития проекта.



